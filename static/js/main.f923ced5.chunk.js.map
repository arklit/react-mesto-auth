{"version":3,"sources":["images/logo.svg","components/Header.js","components/Footer.js","contexts/CurrentUserContext.js","components/Card.js","images/editButton.svg","images/addButton.svg","components/Main.js","components/ImagePopup.js","utils/api.js","components/PopupWithForm.js","components/AddPlacePopup.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AuthForm.js","components/Login.js","images/success.svg","images/fail.svg","components/InfoTooltip.js","components/Register.js","utils/auth.js","components/ProtectedRoute.js","components/App.js","reportWebVitals.js","index.js"],"names":["Header","props","className","src","headerLogo","alt","exact","path","userEmail","to","onClick","onSignOut","Footer","CurrentUserContext","React","createContext","Card","currentUser","useContext","isOwn","card","owner","_id","cardDeleteButtonClassName","isLiked","likes","some","i","cardLikeButtonClassName","type","onCardDelete","onCardClick","link","name","onCardLike","length","Main","onEditAvatar","avatar","about","onEditProfile","editButton","onAddPlace","addButton","cards","map","ImagePopup","onClose","api","options","this","_url","url","_headers","headers","res","ok","json","Promise","reject","status","cardId","fetch","method","then","_getRes","data","body","JSON","stringify","authorization","PopupWithForm","isOpen","title","onSubmit","children","buttonText","AddPlacePopup","useState","setName","setLink","useEffect","e","preventDefault","value","onChange","target","placeholder","id","minLength","maxLength","required","EditProfilePopup","description","setDescription","onUpdateUser","EditAvatarPopup","avatarRef","useRef","current","onUpdateAvatar","ref","AuthForm","Login","email","setEmail","password","setPassword","onLogin","InfoTooltip","isSuccess","success","fail","Register","onRegister","BASE_URL","getRes","ProtectedRoute","Component","component","loggedIn","App","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","selectedCard","setSelectedCard","setCards","setCurrentUser","setLoggedIn","isInfoTooltipOpen","setIsInfoTooltipOpen","setUserEmail","setIsSuccess","history","useHistory","all","getUserInfo","getInitialCards","userData","catch","error","console","log","handleCheckToken","useCallback","token","localStorage","getItem","push","err","closeAllPopups","Provider","removeItem","auth","setItem","finally","like","changeLikeCardStatus","newCard","state","c","deleteCard","filter","addCard","updateAvatar","editProfile","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.f923ced5.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.03b78ada.svg\";","import React from 'react';\r\nimport headerLogo from '../images/logo.svg';\r\nimport { Link, Route, Switch } from 'react-router-dom';\r\n function Header(props) {\r\n     return (\r\n        <header className=\"header\">\r\n          <img className=\"header__logo\" src={headerLogo} alt=\"лого\" />\r\n          <Switch>\r\n            <Route exact path='/'>\r\n              <div className='header__container'>\r\n                <p className='header__email'>{props.userEmail}</p>\r\n                <Link className='header__link' to='sign-in' onClick={props.onSignOut}>\r\n                  Выйти\r\n                </Link>\r\n              </div>\r\n            </Route>\r\n            <Route path='/sign-up'>\r\n              <Link className='header__link' to='sign-in'>\r\n                 Войти\r\n              </Link>\r\n            </Route>\r\n            <Route path='/sign-in'>\r\n              <Link className='header__link' to='sign-up'>\r\n                Регистрация\r\n              </Link>\r\n            </Route>\r\n          </Switch> \r\n        </header>\r\n     );\r\n }\r\nexport default Header\r\n","function Footer() {\r\n    return (\r\n      <footer className=\"footer\">\r\n        <p className=\"footer__paragraph\">© 2021 Mesto Russia</p>\r\n      </footer>\r\n    )\r\n}\r\nexport default Footer","import React from 'react';\r\n\r\nexport const CurrentUserContext = React.createContext()","import React from 'react';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\nfunction Card(props) {\n  const currentUser = React.useContext(CurrentUserContext);\n  const isOwn = props.card.owner._id === currentUser._id;\n  const cardDeleteButtonClassName = `element__trash ${\n    isOwn ? 'element__trash_active' : 'element__trash_hidden'\n  }`;\n  const isLiked = props.card.likes.some((i) => i._id === currentUser._id);\n  const cardLikeButtonClassName = `element__like ${\n    isLiked ? 'element__like_active' : ''\n  }`;\n  function handleLikeClick() {\n    props.onCardLike(props.card);\n  }\n  function handleClick() {\n    props.onCardClick(props.card);\n  }\n  function handleDeleteClick() {\n    props.onCardDelete(props.card);\n  }\n  return (\n    <div className='element'>\n      <button\n        type='button'\n        className={cardDeleteButtonClassName}\n        onClick={handleDeleteClick}\n      ></button>\n      <img\n        className='element__photo'\n        onClick={handleClick}\n        src={props.card.link}\n        alt={props.card.name}\n      />\n      <div className='element__discription'>\n        <h2 className='element__name'>{props.card.name}</h2>\n        <div className='element__like-container'>\n          <button\n            type='button'\n            className={cardLikeButtonClassName}\n            onClick={handleLikeClick}\n          ></button>\n          <span className='element__like-quantity'>{props.card.likes.length}</span>\n        </div>\n      </div>\n    </div>\n  );\n}\nexport default Card;\n","export default __webpack_public_path__ + \"static/media/editButton.8667ac4a.svg\";","export default __webpack_public_path__ + \"static/media/addButton.d86bb2ed.svg\";","import React from 'react';\nimport Card from './Card';\nimport editButton from '../images/editButton.svg';\nimport addButton from '../images/addButton.svg';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\nfunction Main(props) {\n  const currentUser = React.useContext(CurrentUserContext);\n  return (\n    <main>\n      <section className='profile'>\n        <div className='profile__avatar-edit'>\n          <button\n            type='button'\n            onClick={props.onEditAvatar}\n            className='profile__avatar-button'\n          ></button>\n          <img className='profile__avatar' src={currentUser.avatar} alt='аватар' />\n        </div>\n        <div className='profile__info'>\n          <div>\n            <h1 className='profile__name'>{currentUser.name}</h1>\n            <p className='profile__bio'>{currentUser.about}</p>\n          </div>\n          <button\n            type='button'\n            onClick={props.onEditProfile}\n            className='profile__edit-button'\n          >\n            <img className='icon' src={editButton} alt='кнопка изменения' />\n          </button>\n        </div>\n        <button type='button' onClick={props.onAddPlace} className='profile__add-button'>\n          <img className='icon' src={addButton} alt='кнопка добавления' />\n        </button>\n      </section>\n      <section className='elements'>\n        {props.cards.map((card) => (\n          <Card\n            onCardLike={props.onCardLike}\n            onCardDelete={props.onCardDelete}\n            onCardClick={props.onCardClick}\n            card={card}\n            key={card._id}\n          />\n        ))}\n      </section>\n    </main>\n  );\n}\n\nexport default Main;\n","function ImagePopup(props) {\n  return (\n    <div className={`popup popup_type-image\" ${props.card ? 'popup_opened' : ''}`}>\n      <figure className='popup__figure'>\n        <img className='popup__image' src={props.card.link} alt={props.card.name} />\n        <button\n          type='button'\n          onClick={props.onClose}\n          className='popup__close-button'\n        ></button>\n        <figcaption className='popup__image-caption'>{props.card.name}</figcaption>\n      </figure>\n    </div>\n  );\n}\nexport default ImagePopup;\n","class Api {\r\n    constructor(options) {\r\n      this._url = options.url;\r\n      this._headers = options.headers;\r\n    }\r\n    _getRes(res) {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    }\r\n\r\n    changeLikeCardStatus(cardId, isLiked) {\r\n      return fetch(`${this._url}/cards/likes/${cardId}`, {\r\n        method: isLiked ? \"PUT\" : \"DELETE\",\r\n        headers: this._headers,\r\n      })\r\n      .then(this._getRes)\r\n    }\r\n    getInitialCards() {\r\n      return fetch(`${this._url}/cards`, {\r\n        method: \"GET\",\r\n        headers: this._headers,\r\n        })\r\n        .then(this._getRes);\r\n   }\r\n    getUserInfo() {\r\n      return fetch(`${this._url}/users/me`, {\r\n        method: \"GET\",\r\n        headers: this._headers,\r\n      })\r\n      .then(this._getRes);\r\n    }\r\n    editProfile(data) {\r\n      return fetch(`${this._url}/users/me`, {\r\n        method: \"PATCH\",\r\n        headers: this._headers,\r\n        body: JSON.stringify({\r\n          name: data.name,\r\n          about: data.about\r\n        })\r\n      })\r\n      .then(this._getRes)\r\n    }\r\n  \r\n    addCard(name, link) {\r\n      return fetch(`${this._url}/cards`, {\r\n        method: \"POST\",\r\n        headers: this._headers,\r\n        body: JSON.stringify({\r\n          name: name,\r\n          link: link\r\n        })\r\n      })\r\n      .then(this._getRes)\r\n    }\r\n  \r\n    deleteCard(cardId) {\r\n      return fetch(`${this._url}/cards/${cardId}`, {\r\n        method: \"DELETE\",\r\n        headers: this._headers\r\n      })\r\n      .then(this._getRes)\r\n    }\r\n  \r\n    likeCard(cardId) {\r\n      return fetch(`${this._url}/cards/likes/${cardId}`, {\r\n        method: \"PUT\",\r\n        headers: this._headers\r\n      })\r\n      .then(this._getRes)\r\n    }\r\n    removeLike(cardId) {\r\n      return fetch(`${this._url}/cards/likes/${cardId}`, {\r\n        method: \"DELETE\",\r\n        headers: this._headers\r\n      })\r\n      .then(this._getRes)\r\n    }\r\n    updateAvatar(data) {\r\n      return fetch(`${this._url}/users/me/avatar`, {\r\n        method: \"PATCH\",\r\n        headers: this._headers,\r\n        body: JSON.stringify({\r\n          avatar: data.avatar\r\n        })\r\n      })\r\n      .then(this._getRes)\r\n    }\r\n}\r\n\r\nconst api = new Api({\r\n    url: `https://mesto.nomoreparties.co/v1/cohort-26`,\r\n    headers: {\r\n      authorization: '57774d67-b59e-4768-b818-6c6912b25ddb',\r\n      'Content-Type': 'application/json'\r\n    }\r\n  });\r\n  export default api","function PopupWithForm(props) {\n  return (\n    <div\n      className={`popup popup_type-${props.name} ${props.isOpen ? 'popup_opened' : ''}`}\n    >\n      <div className='popup__container'>\n        <button\n          type='button'\n          className='popup__close-button'\n          onClick={props.onClose}\n        ></button>\n        <h2 className='popup__form-title'>{props.title}</h2>\n        <form\n          name={`${props.name}-form`}\n          onSubmit={props.onSubmit}\n          className='popup__form'\n        >\n          {props.children}\n          <button type='submit' className='popup__submit'>\n            {props.buttonText}\n          </button>\n        </form>\n      </div>\n    </div>\n  );\n}\nexport default PopupWithForm;\n","import PopupWithForm from './PopupWithForm';\nimport React from 'react';\nfunction AddPlacePopup(props) {\n  const [name, setName] = React.useState('');\n  const [link, setLink] = React.useState('');\n  React.useEffect(() => {\n    setName('');\n    setLink('');\n  }, [props.isOpen]);\n\n  function editName(e) {\n    setName(e.target.value);\n  }\n  function editLink(e) {\n    setLink(e.target.value);\n  }\n  function handleSubmit(e) {\n    e.preventDefault();\n    props.onAddPlace(name, link);\n  }\n  return (\n    <PopupWithForm\n      name={'card'}\n      title={'Новое место'}\n      isOpen={props.isOpen}\n      buttonText={'Создать'}\n      onSubmit={handleSubmit}\n      onClose={props.onClose}\n    >\n      <input\n        name='title'\n        value={name}\n        onChange={editName}\n        type='text'\n        placeholder='Название'\n        id='title-input'\n        className='popup__text popup__text_card_name popup__input'\n        minLength='2'\n        maxLength='30'\n        required\n      />\n      <span className='popup__input-error title-input-error'></span>\n      <input\n        name='link'\n        value={link}\n        onChange={editLink}\n        type='url'\n        placeholder='Ссылка на картинку'\n        id='url-input'\n        className='popup__text popup__text_card_img popup__input'\n        required\n      />\n      <span className='popup__input-error url-input-error'></span>\n    </PopupWithForm>\n  );\n}\nexport default AddPlacePopup;\n","import React from 'react';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\nimport PopupWithForm from './PopupWithForm';\nfunction EditProfilePopup(props) {\n  const currentUser = React.useContext(CurrentUserContext);\n  const [name, setName] = React.useState('');\n  const [description, setDescription] = React.useState('');\n  React.useEffect(() => {\n    setName(currentUser.name);\n    setDescription(currentUser.about);\n  }, [currentUser, props.isOpen]);\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    props.onUpdateUser({\n      name,\n      about: description,\n    });\n  }\n  function editName(e) {\n    setName(e.target.value);\n  }\n  function editDescription(e) {\n    setDescription(e.target.value);\n  }\n  return (\n    <PopupWithForm\n      name={'profile'}\n      title={'Редактировать профиль'}\n      isOpen={props.isOpen}\n      buttonText={'Сохранить'}\n      onSubmit={handleSubmit}\n      onClose={props.onClose}\n    >\n      <input\n        name='name'\n        onChange={editName}\n        value={name}\n        type='text'\n        placeholder='Имя'\n        id='name-input'\n        className='popup__text popup__text_type_name popup__input'\n        minLength='2'\n        maxLength='40'\n        required\n      />\n      <span className='popup__input-error name-input-error'></span>\n      <input\n        name='about'\n        onChange={editDescription}\n        value={description}\n        type='text'\n        placeholder='О себе'\n        id='bio-input'\n        className='popup__text popup__text_type_bio popup__input'\n        minLength='2'\n        maxLength='200'\n        required\n      />\n      <span className='popup__input-error bio-input-error'></span>\n    </PopupWithForm>\n  );\n}\nexport default EditProfilePopup;\n","import PopupWithForm from './PopupWithForm';\nimport React from 'react';\nfunction EditAvatarPopup(props) {\n  const avatarRef = React.useRef(null);\n  function handleSubmit(e) {\n    e.preventDefault();\n    props.onUpdateAvatar({\n      avatar: avatarRef.current.value,\n    });\n  }\n  React.useEffect(() => {\n    avatarRef.current.value = '';\n  }, [props.isOpen]);\n\n  return (\n    <PopupWithForm\n      name={'avatar'}\n      title={'Обновить аватар'}\n      isOpen={props.isOpen}\n      buttonText={'Сохранить'}\n      onSubmit={handleSubmit}\n      onClose={props.onClose}\n    >\n      <input\n        name='link'\n        type='url'\n        placeholder='Ссылка на аватар'\n        id='avatar-input'\n        className='popup__text popup__text_avatar popup__input'\n        minLength='2'\n        required\n        ref={avatarRef}\n      />\n      <span className='popup__input-error avatar-input-error'></span>\n    </PopupWithForm>\n  );\n}\nexport default EditAvatarPopup;\n","import React from \"react\";\r\nimport { Link } from 'react-router-dom';\r\nfunction AuthForm(props) {\r\n    return(\r\n      <section className='authorization'>\r\n        <h1 className=\"authorization__title\">{props.title}</h1>\r\n          <form\r\n          className='authorization__form' \r\n          onSubmit={props.onSubmit} \r\n          name={`${props.name}-form`}\r\n          >\r\n            {props.children}\r\n            <button className='authorization__submit' type='submit'>{props.buttonText}</button>\r\n            {props.name === 'register' &&\r\n              <div className=\"authorization__hint\">\r\n                <p className=\"authorization__hint-text\">Уже зарегистрированы?</p>\r\n                <Link to=\"/sign-in\" className=\"authorization__hint-link\">Войти</Link>\r\n              </div>\r\n            }\r\n          </form>\r\n      </section>\r\n    )\r\n}\r\nexport default AuthForm","import React from \"react\";\r\nimport AuthForm from \"./AuthForm\";\r\n\r\nfunction Login(props) {\r\n  const [email, setEmail] = React.useState('');\r\n  const [password, setPassword] = React.useState('');\r\n\r\n  function editEmail(e) {\r\n    setEmail(e.target.value);\r\n  }\r\n  function editPassword(e) {\r\n    setPassword(e.target.value)\r\n  }\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    props.onLogin(email, password)\r\n  }\r\n    return(\r\n      <AuthForm\r\n      name={'login'} \r\n      title={'Вход'} \r\n      buttonText={\"Войти\"}\r\n      onSubmit={handleSubmit}>\r\n        <input \r\n          className='authorization__input' \r\n          type='email' \r\n          name='email'\r\n          value={email}\r\n          onChange={editEmail}\r\n          placeholder=\"E-mail\" \r\n          required\r\n        />\r\n        <input \r\n          className='authorization__input' \r\n          type='password' \r\n          name='password'\r\n          value={password}\r\n          onChange={editPassword}\r\n          placeholder=\"Пароль\" \r\n          minLength='6'\r\n          required\r\n        />\r\n      </AuthForm>\r\n    )\r\n}\r\nexport default Login\r\n","export default __webpack_public_path__ + \"static/media/success.1b6082f8.svg\";","export default __webpack_public_path__ + \"static/media/fail.df8eddf6.svg\";","import React from \"react\";\r\nimport success from '../images/success.svg';\r\nimport fail from '../images/fail.svg';\r\n\r\nfunction InfoTooltip(props) {\r\n  return(\r\n    <div className={`popup popup_type-info ${props.isOpen ? 'popup_opened' : ''}`}>\r\n      <div className='popup__container'>\r\n        <button type='button' className='popup__close-button' onClick={props.onClose}></button>\r\n          <div className='popup__form'>\r\n            <img className='popup__tip'\r\n              src={props.isSuccess ? success : fail}\r\n              alt={props.isSuccess ? 'Успешно' : 'Ошибка'}\r\n              />\r\n            <h2 className='popup__tip-text'>\r\n              {props.isSuccess \r\n                ? \"Вы успешно зарегистрировались!\" \r\n                : \"Что-то пошло не так! Попробуйте ещё раз.\"\r\n              }\r\n            </h2>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n}\r\nexport default InfoTooltip","import React from \"react\";\r\nimport AuthForm from \"./AuthForm\";\r\n\r\nfunction Register(props) {\r\n  const [email, setEmail] = React.useState('');\r\n  const [password, setPassword] = React.useState('');\r\n\r\n  function editEmail(e) {\r\n    setEmail(e.target.value)\r\n  }\r\n  function editPassword(e) {\r\n    setPassword(e.target.value)\r\n  }\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    props.onRegister(email, password)\r\n  }\r\n    return(\r\n      <AuthForm \r\n      onSubmit={handleSubmit}\r\n      name={'register'} \r\n      title={'Регистрация'} \r\n      buttonText={\"Зарегистрироваться\"}>\r\n        <input \r\n          className='authorization__input' \r\n          type='email' \r\n          name='email' \r\n          placeholder=\"E-mail\" \r\n          value={email}\r\n          onChange={editEmail}\r\n          required\r\n        />  \r\n        <input \r\n          className='authorization__input' \r\n          type='password' \r\n          name='password' \r\n          placeholder=\"Пароль\" \r\n          minLength='6'\r\n          value={password}\r\n          onChange={editPassword}\r\n          required\r\n        />\r\n      </AuthForm>    \r\n    )\r\n}\r\nexport default Register","export const BASE_URL = 'https://auth.nomoreparties.co';\r\n\r\nfunction getRes(res) {\r\n  if (res.ok) {\r\n    return res.json();\r\n  }\r\n    return Promise.reject(`Ошибка: ${res.status}`);\r\n}\r\n\r\nexport const register = (email, password) => {\r\n  return fetch(`${BASE_URL}/signup`, {\r\n    method: 'POST',\r\n    headers: {\r\n        \"Content-Type\": \"application/json\" \r\n    },\r\n    body: JSON.stringify({email, password})\r\n    })\r\n    .then(getRes)\r\n}\r\n\r\nexport const authorize = (email, password) => {\r\n  return fetch(`${BASE_URL}/signin`, {\r\n    method: 'POST',\r\n    headers: {\r\n        \"Content-Type\": \"application/json\" \r\n    },\r\n    body: JSON.stringify({email, password})\r\n  })\r\n  .then(getRes)\r\n}\r\n\r\nexport const checkToken = (token) => {\r\n    return fetch(`${BASE_URL}/users/me`, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Bearer ${token}`\r\n      }\r\n    })\r\n    .then(getRes)\r\n  }","import React from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\nconst ProtectedRoute = ({ component: Component, ...props }) => {\r\n    return (\r\n      <Route>\r\n        {\r\n        () => props.loggedIn ? <Component {...props} /> : <Redirect to=\"./sign-up\" />\r\n        }\r\n      </Route>\r\n    );\r\n  };\r\n  \r\n  export default ProtectedRoute; ","import React from 'react';\nimport Header from './Header';\nimport Footer from './Footer';\nimport Main from './Main';\nimport ImagePopup from './ImagePopup';\nimport api from '../utils/api';\nimport AddPlacePopup from './AddPlacePopup';\nimport EditProfilePopup from './EditProfilePopup';\nimport EditAvatarPopup from './EditAvatarPopup';\nimport Login from './Login';\nimport InfoTooltip from './InfoTooltip';\nimport Register from './Register';\nimport * as auth from '../utils/auth'\nimport { Route, Switch, useHistory, Redirect } from 'react-router-dom';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js';\nimport ProtectedRoute from './ProtectedRoute';\n\nfunction App() {\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\n  const [selectedCard, setSelectedCard] = React.useState(null);\n  const [cards, setCards] = React.useState([]);\n  const [currentUser, setCurrentUser] = React.useState({ name: '', about: '' });\n  const [loggedIn, setLoggedIn] = React.useState(false)\n  const [isInfoTooltipOpen, setIsInfoTooltipOpen] = React.useState(false)\n  const [userEmail, setUserEmail] = React.useState('');\n  const [isSuccess, setIsSuccess] = React.useState(false)\n  const history = useHistory();\n\n  React.useEffect(() => {\n    if(loggedIn) {\n    Promise.all([api.getUserInfo(), api.getInitialCards()])\n      .then(([userData, data]) => {\n        setCurrentUser(userData);\n        setCards(data);\n      })\n      .catch((error) => console.log(error));\n    }\n  }, [loggedIn]);\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some((like) => like._id === currentUser._id);\n    api\n      .changeLikeCardStatus(card._id, !isLiked)\n      .then((newCard) => {\n        setCards((state) => state.map((c) => (c._id === card._id ? newCard : c)));\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n\n  function handleCardDelete(card) {\n    api\n      .deleteCard(card._id)\n      .then(() => {\n        setCards((state) => state.filter((c) => c !== card));\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n\n  function handleUpdateUser(data) {\n    api\n      .editProfile(data)\n      .then((data) => {\n        setCurrentUser(data);\n        closeAllPopups();\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n  function handleUpdateAvatar(data) {\n    api\n      .updateAvatar(data)\n      .then((data) => {\n        setCurrentUser(data);\n        closeAllPopups();\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n  function handleAddPlace(name, link) {\n    api\n      .addCard(name, link)\n      .then((newCard) => {\n        setCards([newCard, ...cards]);\n        closeAllPopups();\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n  function handleRegister(email, password) {\n    auth.register(email, password)\n      .then(() => {\n        setIsSuccess(true);\n        history.push('/sign-in')\n      })\n      .catch((err) => {\n        console.log(err);\n        setIsSuccess(false);\n      })\n      .finally(() => {\n        setIsInfoTooltipOpen(true)\n      })\n  }\n  function handleLogin(email, password) {\n    auth.authorize(email, password)\n      .then((res) => {\n        localStorage.setItem('token', res.token)\n        setLoggedIn(true);\n        setUserEmail(email);\n        history.push('/')\n      })\n      .catch((err) => {\n        console.log(err)\n      })\n  }\n  function handleSignOut() {\n    localStorage.removeItem('token')\n    setLoggedIn(false);\n    history.push('/sign-in')\n  }\n  const handleCheckToken = React.useCallback(() => {\n    auth.checkToken(localStorage.getItem('token'))\n      .then((res) => {\n        setLoggedIn(true);\n        setUserEmail(res.data.email);\n        history.push('/')\n      }) \n      .catch((err) => {\n        console.log(err)\n        setLoggedIn(false)\n      })\n  }, [history])\n\n  React.useEffect(() => {\n    const token = localStorage.getItem('token');\n    if (token) {\n      handleCheckToken();\n    }\n  }, [handleCheckToken])\n\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(true);\n  }\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(true);\n  }\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(true);\n  }\n  function handleCardClick(card) {\n    setSelectedCard(card);\n  }\n  function closeAllPopups() {\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setIsEditAvatarPopupOpen(false);\n    setSelectedCard(null);\n    setIsInfoTooltipOpen(false);\n  }\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className='page__container'>\n        <Header loggedIn={loggedIn} userEmail={userEmail} onSignOut={handleSignOut}/>\n        <Switch>\n          <Route path=\"/sign-in\">\n            <Login onLogin={handleLogin}/>\n          </Route>\n          <Route path=\"/sign-up\">\n            <Register onRegister={handleRegister}/>\n          </Route>\n          <ProtectedRoute\n            exact\n            path='/'\n            loggedIn={loggedIn}\n            component={Main}\n            onCardLike={handleCardLike}\n            onCardDelete={handleCardDelete}\n            onEditProfile={handleEditProfileClick}\n            onEditAvatar={handleEditAvatarClick}\n            onAddPlace={handleAddPlaceClick}\n            onCardClick={handleCardClick}\n            cards={cards}\n          />\n          <Route path=\"*\">\n            {loggedIn ? <Redirect to=\"/\"/> : <Redirect to=\"/sign-in\"/>}\n          </Route>\n        </Switch>\n        <Footer />\n        <InfoTooltip\n          isOpen={isInfoTooltipOpen}\n          onClose={closeAllPopups}\n          isSuccess={isSuccess}\n        />\n        <AddPlacePopup\n          onAddPlace={handleAddPlace}\n          isOpen={isAddPlacePopupOpen}\n          onClose={closeAllPopups}\n        />\n        <EditAvatarPopup\n          onUpdateAvatar={handleUpdateAvatar}\n          isOpen={isEditAvatarPopupOpen}\n          onClose={closeAllPopups}\n        />\n        <EditProfilePopup\n          onUpdateUser={handleUpdateUser}\n          isOpen={isEditProfilePopupOpen}\n          onClose={closeAllPopups}\n        />\n        <ImagePopup\n          card={selectedCard !== null && selectedCard}\n          onClose={closeAllPopups}\n        />\n      </div>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css'\nimport App from './components/App';\nimport reportWebVitals from './reportWebVitals';\nimport { HashRouter } from 'react-router-dom';\n\nReactDOM.render(\n  <React.StrictMode>\n    <HashRouter> \n      <App />\n    </HashRouter> \n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\nreportWebVitals();\n"],"sourceRoot":""}